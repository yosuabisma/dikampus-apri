!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["vue-l-lazyload"]=t():e["vue-l-lazyload"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){console.log("v-l-lazyload: "+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.VueLLazyload=t.Lazy=t.LazyRef=void 0;var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),c=n(2),l=i.$.isStr,s={props:{tag:{type:String,default:"div"},opts:{type:Object,default:function(){return{}}}},render:function(e){var t=this;return e(t.tag,t.$slots.default)},mounted:function(){var e=this,t=e.$el;e.$lazy=new o(a({},e.opts,{el:t}))},destroyed:function(){this.$lazy.destroy()},methods:{check:function(){this.$lazy.check()},add:function(e){this.$lazy.addChild(e)},update:function(e){this.$lazy.update(e)},rm:function(e){this.$lazy.rmChild(e)}}},u={bind:function(e,t,n){var i=t.value;l(i)&&(i={src:i}),e._lazyBound=!0;var c=n.context,s=i.ref;c.$nextTick(function(){var t;if(e._lazyBound){s&&(t=c.$refs[s],t||r('ref "'+s+'" not found'));var n=a({},i,{el:e}),l=t&&t.$lazy;void 0!==l&&(n.parent=l);(e._$lazy=new o(n)).check()}})},componentUpdated:function(e,t){var n=t.value,r=t.oldValue,o=l(n)?n:n.src;if(o!=(l(r)?r:r.src)){var a=e._$lazy;a&&a.update({src:o})}},unbind:function(e,t,n){e._lazyBound&&(e._lazyBound=!1),n.context.$nextTick(function(){var t=e._$lazy;t&&(t.destroy(),e._$lazy=null)})}},f={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o=(0,c.LazyClass)(e),e.$lazy=new o(a({},t,{isRoot:!0})),e.directive("lazy",u),e.component("lazy-ref",s)}};/**
	 * @license
	 * vue-l-lazyload
	 *
	 * Copyright (c) 2017 - NOW Light Leung
	 *
	 * This library is distributed in the hope that it will be useful,
	 * but WITHOUT ANY WARRANTY; without even the implied warranty of
	 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
	 * Lesser General Public License for more details.
	 */
t.LazyRef=s,t.Lazy=u,t.VueLLazyload=f},function(e,t){"use strict";function n(e){return"undefined"==typeof e?"undefined":_(e)}function r(e){return e instanceof Array}function o(e){return"string"==n(e)}function a(e){return null==e?"":String.prototype.trim.call(e)}function i(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)o=e[n],t.call(o,o,n)}function c(e,t,n,a){o(t)?e.addEventListener(t,n,a):r(t)&&i(t,function(t){return c(e,t,n,a)})}function l(e,t,n){o(t)?e.removeEventListener(t,n):r(t)&&i(t,function(t){return l(e,t,n)})}function s(e,t){var n=e.className||"",r=n&&void 0!==n.baseVal;return void 0===t?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)}function u(e,t){var n=e.classList;if(n)n.add(t);else{var r=s(e).split(" "),o={};i(r,function(e){o[e]=!0}),o[t]||s(e,r.join(" ")+t)}}function f(e){return new RegExp("(^|\\s)"+e+"(\\s|$)")}function d(e,t){if(o(t)){var n=e.classList;if(n)n.remove(t);else{s(e,a(s(e).replace(f(t)," ")))}}else r(t)&&i(t,function(t){return d(e,t)})}function p(e,t,n){e.setAttribute(t,n)}function y(e,t){e.removeAttribute(t)}function v(e){var t=e.getBoundingClientRect();return{left:t.left+w.pageXOffset,top:t.top+w.pageYOffset,width:k(t.width),height:k(t.height)}}function h(e,t){return e.indexOf(t)}function g(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments[2];return function(){for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];var l=o||this,s=+new Date;t&&s<t+r?(clearTimeout(n),n=setTimeout(function(){t=s,e.apply(l,i)},r)):(t=s,e.apply(l,i))}}function m(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function b(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function z(e,t){return"number"!=n(t)||L[b(e)]?t:t+"px"}function $(e,t,n){var r=e.style;return arguments.length<3?r[m(t)]||getComputedStyle(e,"").getPropertyValue(t):void(n||0===n?r[b(t)]=z(t,n):r.removeProperty(b(t)))}Object.defineProperty(t,"__esModule",{value:!0});var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=window,L={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=Math.round;t.$={on:c,off:l,trim:a,type:n,isArr:r,isStr:o,addClass:u,removeClass:d,attr:p,css:$,removeAttr:y,each:i,offset:v,search:h,throttle:g}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){function t(e,t){L(e,b),w(e,t)}var n,r,o=e.opts,a=e.req,i=o.src,c=o.el,l=o.classTarget,s=o.retry,u=o.once,f=o.classLoading,d=o.classErr,p=o.classLoaded,h=c,b=[f,d,p],z=l==y?c.parentNode||c:c;switch(a&&a.cancel(),i=_(i),e.opts.mode){case v:O(c,"background-image","none"),n=function(){O(c,"background-image","url("+i+")")},r=function(){O(c,"background-image","none")},h=new Image}i?(e.stat=g,e.req=new R({el:h,src:i,retry:s,onLoad:function(){n&&n(),e.stat=m,t(z,p),u&&e.destroy()},onErr:function(){r&&r(),e.stat=m,t(z,d),u&&e.destroy()}}),t(z,f)):(e.stat=m,t(z,p))}function a(e){return function(){function t(n){r(this,t);var o=this,a=n,c=a.isRoot,l=n,y=l.parent;if(c)n=i({el:b,events:[s],classLoading:u,classLoaded:d,classErr:f,classTarget:p,retry:0,once:!0,preloadRatio:1},n);else{var v=e.$lazy;n=i({parent:v},y&&y.opts||v.opts,n)}var g=n,m=g.el,z=g.events;y=n.parent,o.parent=y,o.id=++E,o.el=m,o.stat=h,o._children=[],o._queues={},o._cbs={},o.events=j(z)?z:[z],o.opts=n,y&&y.addChild(o)}return c(t,[{key:"check",value:function(e){var t,n,r=this;r.stat<m&&r.inView()&&o(r);var a=r._children;if(a.length){var i=r._queues,c=e?i[e]:a;if(c)for(t=0,n=c.length;t<n;t++){var l=c[t];l.check()}}}},{key:"inView",value:function(){var e=this,t=e.parent,n=!1;if(t){var r=t.el,o=e.opts.preloadRatio,a=1-o,i=r===b,c=i?{left:b.pageXOffset,top:b.pageYOffset,width:b.innerWidth,height:b.innerHeight}:C(r),l=C(e.el),s=c.left,u=c.top,f=c.width,d=c.height,p=f*a,y=d*a,v=u-y/2,h=s-p/2,g=f+p,m=d+y,z=l.left,$=l.top,_=l.width,w=l.height;z<h+g&&z+_>h&&$<v+m&&$+w>v&&(n=!0)}return n}},{key:"addChild",value:function(e){function t(e){var t,n,r=i._cbs,a=r[o];a||(a=r[o]=S(function(){for(t=0,n=e.length;t<n;t++)e[t].check()})),z(l,o,a,P?{passive:!0}:0)}var n,r,o,a,i=this,c=e.events,l=i.el;for(i._children.push(e),n=0,r=c.length;n<r;n++)o=c[n],a=i._queues[o],a||(a=i._queues[o]=[],t(a)),a.push(e)}},{key:"update",value:function(e){var t=this,n=t.opts;n.src=e.src,n.once||(t.stat=h,t.check())}},{key:"rmChild",value:function(e){var t,n,r=this,o=r._queues,a=r._children,i=Object.keys(o),c=A(a,e);for(c>=0&&a.splice(c,1),t=0,n=i.length;t<n;t++){var l=i[t],s=o[l];if(c=A(s,e),c>=0&&s.splice(c,1),0==s.length){var u=r._cbs,f=u[l];u[l]=null,$(l,f)}}}},{key:"destroy",value:function(){var e=this,t=e.parent;e.destroyed||(t&&t.rmChild(e),e.destroyed=!0)}}]),t}()}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.LazyClass=a;var l=n(1),s="scroll",u="lazy-loading",f="lazy-err",d="lazy-loaded",p="self",y="parent",v="bg",h=0,g=1,m=2,b=window,z=l.$.on,$=l.$.off,_=l.$.trim,w=l.$.addClass,L=l.$.removeClass,k=l.$.attr,O=l.$.css,x=l.$.removeAttr,C=l.$.offset,j=l.$.isArr,A=l.$.search,S=l.$.throttle,E=0,P=!1;try{var V=Object.defineProperty({},"passive",{get:function(){P=!0}});b.addEventListener("test",null,V)}catch(e){}var R=function(){function e(t){function n(){x(o,"src"),k(o,"src",a)}var o=t.el,a=t.src,i=t.retry,c=t.onLoad,l=t.onErr;r(this,e);var s=this;s.canceled=!1,s.retry=i,o.onload=function(){!s.canceled&&c&&c()},o.onerror=function(){if(!s.canceled){var e=s.retry;e==-1||e>0?(n(),e>0&&s.retry--):l&&l()}},n()}return c(e,[{key:"cancel",value:function(){this.canceled=!0}}]),e}()}])});